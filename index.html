<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple AR GPS Arrow</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: black;
    font-family: Arial;
  }

  video {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 0;
  }

  #arrow {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 120px;
    height: 120px;
    margin-left: -60px;
    margin-top: -60px;
    z-index: 1;
    transform-origin: center;
  }

  #info {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    background: rgba(0,0,0,0.6);
    padding: 10px 16px;
    border-radius: 12px;
    z-index: 2;
  }

  #arrow {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  margin-left: -30px;
  margin-top: -50px;
  border-left: 30px solid transparent;
  border-right: 30px solid transparent;
  border-bottom: 60px solid red;
  z-index: 10;
  transform-origin: center;
}

</style>
</head>

<body>

<video id="camera" autoplay playsinline></video>

<div id="arrow"></div>

<div id="info">Waiting for GPS...</div>

<script>
// ðŸŽ¯ DESTINATION (CHANGE THIS)
const targetLat = 11.0245585;   // example
const targetLon = 124.0111658;

// CAMERA
navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
.then(stream => {
  document.getElementById("camera").srcObject = stream;
});

// GPS + COMPASS
let currentLat, currentLon, heading = 0;

navigator.geolocation.watchPosition(pos => {
  currentLat = pos.coords.latitude;
  currentLon = pos.coords.longitude;
}, err => alert("Enable GPS"), { enableHighAccuracy: true });

window.addEventListener("deviceorientationabsolute", e => {
  if (e.alpha !== null) heading = e.alpha;
});

// MATH
function toRad(d){ return d * Math.PI / 180; }
function toDeg(r){ return r * 180 / Math.PI; }

function bearing(lat1, lon1, lat2, lon2) {
  const y = Math.sin(toRad(lon2-lon1)) * Math.cos(toRad(lat2));
  const x = Math.cos(toRad(lat1))*Math.sin(toRad(lat2)) -
            Math.sin(toRad(lat1))*Math.cos(toRad(lat2))*Math.cos(toRad(lon2-lon1));
  return (toDeg(Math.atan2(y,x)) + 360) % 360;
}

function distance(lat1, lon1, lat2, lon2) {
  const R = 6371000;
  const dLat = toRad(lat2-lat1);
  const dLon = toRad(lon2-lon1);
  const a = Math.sin(dLat/2)**2 +
            Math.cos(toRad(lat1))*Math.cos(toRad(lat2))*Math.sin(dLon/2)**2;
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}

// UPDATE LOOP
setInterval(() => {
  if (!currentLat || !heading) return;

  const brg = bearing(currentLat, currentLon, targetLat, targetLon);
  const rot = brg - heading;

  document.getElementById("arrow").style.transform =
    `rotate(${rot}deg)`;

  const dist = Math.round(distance(currentLat, currentLon, targetLat, targetLon));
  document.getElementById("info").innerText =
    `Distance: ${dist} m`;

}, 500);
</script>

</body>
</html>
